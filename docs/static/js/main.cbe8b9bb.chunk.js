(this["webpackJsonppdf-app"]=this["webpackJsonppdf-app"]||[]).push([[0],{57:function(e,t,n){},59:function(e,t,n){},70:function(e,t,n){"use strict";n.r(t);var i=n(15),a=n.n(i),r=n(31),s=n.n(r),c=(n(57),n(19)),o=n(17),l=n.n(o),d=n(20),p=n(12),g=n(32),u=n(33),x=n(52),h=n(51),f=(n(59),n(11)),b=n(23),j=n.n(b),y=n(49),m=n(50),v=n(5);Object(y.polyfill)({dragImageTranslateOverride:m.scrollBehaviourDragImageTranslateOverride}),window.addEventListener("touchmove",(function(){}));var O="A4",k="US Letter",w="Same as Image",S="Portrait",C="Landscape",D="0",I="20",P="50",z=function(e){Object(x.a)(n,e);var t=Object(h.a)(n);function n(e){var i;return Object(g.a)(this,n),(i=t.call(this,e)).clearSelection=function(){var e=Object(p.a)(i.state.images);e.forEach((function(e){e.selected=!1})),i.setState({images:e})},i.readfiles=function(){var e=Object(d.a)(l.a.mark((function e(t){var n,a,r,s;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log(t.length),n=[],a=0;case 3:if(!(a<t.length)){e.next=14;break}if(console.log("Type: "+t[a].type),"image/png"===t[a].type||"image/x-png"===t[a].type||"image/jpeg"===t[a].type){e.next=7;break}return e.abrupt("continue",11);case 7:r=window.URL.createObjectURL(t[a]),s=i.uuidv4(),console.log("uuid: "+s),n.push({id:s,imgDataUrl:r,file:t[a],selected:!1});case 11:a++,e.next=3;break;case 14:i.setState((function(e){return{images:[].concat(Object(p.a)(e.images),n)}}));case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),i.loadImage=function(e){return new Promise((function(t,n){var i=new Image;i.onload=function(){t(i)},i.onerror=function(e){n(e)},i.src=e}))},i.fetchImage=function(){var e=Object(d.a)(l.a.mark((function e(t,n){var a,r,s,c,o,d,p;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n){e.next=10;break}return e.next=3,fetch(t);case 3:return a=e.sent,e.next=6,a.arrayBuffer();case 6:return r=e.sent,e.abrupt("return",{arrayBuffer:r,mime:a.headers.get("content-type")});case 10:return e.next=12,i.loadImage(t);case 12:return s=e.sent,c=document.createElement("canvas"),o=c.getContext("2d"),c.width=s.width,c.height=s.height,o.drawImage(s,0,0,s.width,s.height),e.next=20,i.canvasToBlob(c,n);case 20:return d=e.sent,e.next=23,d.arrayBuffer();case 23:return p=e.sent,e.abrupt("return",{arrayBuffer:p,mime:"image/jpeg"});case 25:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),i.createPdf=Object(d.a)(l.a.mark((function e(){var t,n,a,r,s,c,o,d,p,g,u,x,h,b,y;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t="",e.prev=1,i.setState({busy:!0}),e.next=5,f.PDFDocument.create();case 5:n=e.sent,a=0;case 7:if(!(a<i.state.images.length)){e.next=46;break}return r=i.getPageSize(),e.next=11,i.fetchImage(i.state.images[a].imgDataUrl,i.state.compressImages?i.state.imageQuality/10:void 0);case 11:return s=e.sent,e.next=14,s.arrayBuffer;case 14:if(c=e.sent,t=s.mime,console.log(t),o=1,"image/jpeg"===t)try{(d=j.a.readFromBinaryFile(c)).Orientation&&(o=d.Orientation,console.log("jpegOrientation: "+o))}catch(l){console.error(l)}return e.next=21,"image/jpeg"===t?n.embedJpg(c):n.embedPng(c);case 21:if(p=e.sent,console.log("width: "+p.width+" height: "+p.height),i.state.pageSize!==w){e.next=27;break}r=[p.width,p.height],e.next=32;break;case 27:e.t0=o,e.next=6===e.t0||8===e.t0?30:32;break;case 30:return r=[r[1],r[0]],e.abrupt("break",32);case 32:g=n.addPage(r),i.state.pageSize===w?g.drawImage(p,{x:0,y:0,width:p.width,height:p.height}):(u=Math.min((g.getWidth()-i.state.pageMargin)/p.width,(g.getHeight()-i.state.pageMargin)/p.height),p.width*u,p.height*u,console.log(p.width+" "+p.height),console.log(g.getWidth()+" "+g.getHeight()),x=p.scale(u),g.drawImage(p,{x:g.getWidth()/2-x.width/2,y:g.getHeight()/2-x.height/2,width:x.width,height:x.height})),e.t1=o,e.next=6===e.t1?37:3===e.t1?39:8===e.t1?41:43;break;case 37:return g.setRotation(Object(f.degrees)(90)),e.abrupt("break",43);case 39:return g.setRotation(Object(f.degrees)(180)),e.abrupt("break",43);case 41:return g.setRotation(Object(f.degrees)(270)),e.abrupt("break",43);case 43:a++,e.next=7;break;case 46:return e.next=48,n.save();case 48:h=e.sent,b=new Blob([h],{type:"application/pdf"}),(y=document.createElement("a")).href=window.URL.createObjectURL(b),"file.pdf",y.download="file.pdf",y.click(),i.setState({busy:!1}),e.next=62;break;case 58:e.prev=58,e.t2=e.catch(1),console.error(e.t2),i.setState({lastError:e.t2,lastMime:t,busy:!1});case 62:case"end":return e.stop()}}),e,null,[[1,58]])}))),i.deletePage=function(e){console.log("To delete: "+e);var t=Object(p.a)(i.state.images),n=-1;t.forEach((function(t,i){t.id===e&&(n=i)})),t.splice(n,1),i.setState({images:t})},i.handleDrop=function(e,t){console.log("droppedId: "+e+" currentId: "+t);var n=-1,a=Object(p.a)(i.state.images);a.forEach((function(t,i){t.id===e&&(n=i)}));var r=a.splice(n,1)[0],s=-1;a.forEach((function(e,n){e.id===t&&(s=n)})),a.splice(s,0,r),console.log(a),i.setState({images:a})},i.getPageSize=function(){switch(i.state.pageSize){case O:if(i.state.pageOrientation===S)return f.PageSizes.A4;var e=Object(p.a)(f.PageSizes.A4);return e.reverse(),e;case k:if(i.state.pageOrientation===S)return f.PageSizes.Letter;var t=Object(p.a)(f.PageSizes.Letter);return t.reverse(),t;default:return}},i.getAspectRatio=function(){var e=i.getPageSize();return e[0]/e[1]},i.state={images:[],pageOrientation:S,pageSize:O,pageMargin:D,lastError:void 0,lastMime:void 0,forceShowOption:!1,compressImages:!1,imageQuality:8,busy:!1},i.fileInput=a.a.createRef(),i}return Object(u.a)(n,[{key:"render",value:function(){var e=this,t={height:"192px",width:"192px",border:"none",display:"flex",background:"white",position:"relative"},n={margin:"0px",flex:"1",backgroundSize:"contain",backgroundRepeat:"no-repeat",backgroundPosition:"center"};this.state.pageMargin===I?n.margin="5px":this.state.pageMargin===P&&(n.margin="10px"),this.state.pageSize!==w&&(t.width=Math.ceil(192*this.getAspectRatio())+"px",t.boxShadow="5px 5px 5px rgb(200,200,200)");var i=Object(v.jsxs)("div",{className:"landing-page",children:[Object(v.jsxs)("div",{style:{padding:"40px"},children:["Convert JPEG or PNG images to PDF without uploading your sensitve data anywhere.",Object(v.jsx)("br",{}),"Files are processed entirely on your device and does not get uploaded to any server."]}),Object(v.jsx)("button",{onClick:function(){return e.fileInput.current.click()},className:"big-btn",children:"Select Images"}),Object(v.jsx)("div",{className:"dropzone",onDragStart:function(e){},onDrop:function(t){t.stopPropagation&&t.stopPropagation(),t.preventDefault&&t.preventDefault();var n=t.dataTransfer.files;e.readfiles(n)},onDragOver:function(e){e.preventDefault&&e.preventDefault()},onDragEnter:function(e){e.preventDefault()},children:"or drop images here"})]}),a=Object(v.jsx)("div",{style:{display:"flex",flexWrap:"wrap",flex:"1",justifyContent:"center"},children:this.state.images.map((function(i,a){return Object(v.jsx)("div",{style:{padding:"5px"},draggable:!0,onDragStart:function(e){e.dataTransfer.effectAllowed="move",e.dataTransfer.setData("text/plain",i.id),console.log("Drag start "+a)},onDrop:function(t){t.stopPropagation&&t.stopPropagation();var n=t.dataTransfer.getData("text/plain");console.log("droppedId: "+n),e.handleDrop(n,i.id)},onDragOver:function(e){e.preventDefault&&e.preventDefault()},onDragEnter:function(e){e.preventDefault()},children:Object(v.jsxs)("div",{style:Object(c.a)({},t),onClick:function(t){for(var n=Object(p.a)(e.state.images),a=0;a<n.length;a++)n[a]=Object(c.a)(Object(c.a)({},n[a]),{},{selected:n[a].id===i.id});e.setState({images:Object(p.a)(n)}),t.stopPropagation()},children:[Object(v.jsx)("div",{style:{display:i.selected?"block":"none",position:"absolute",right:"0px",top:"0px",padding:"5px",color:"rgb(180,180,180)"},onClick:function(t){t.stopPropagation(),e.deletePage(i.id)},children:Object(v.jsx)("i",{className:"fa fa-trash","aria-hidden":"true"})}),Object(v.jsx)("div",{style:Object(c.a)(Object(c.a)({},n),{},{backgroundImage:"url('"+i.imgDataUrl+"')"})})]})},i.id+"")}))}),r=Object(v.jsxs)("div",{children:[Object(v.jsx)("div",{style:{paddingBottom:"10px",fontSize:"16px",color:"gray",paddingTop:"20px"},children:"Page margin"}),Object(v.jsxs)("div",{style:{display:"flex"},children:[Object(v.jsx)("div",{style:{flex:"1",height:"50px",display:"flex",flexDirection:"column",justifyContent:"center",textAlign:"center",background:this.state.pageMargin==D?"purple":"rgb(240,240,240)",color:this.state.pageMargin==D?"white":"black",padding:"5px"},onClick:function(){return e.setState({pageMargin:D})},children:"None"}),Object(v.jsx)("div",{style:{flex:"1",height:"50px",display:"flex",flexDirection:"column",justifyContent:"center",textAlign:"center",background:this.state.pageMargin==I?"purple":"rgb(240,240,240)",color:this.state.pageMargin==I?"white":"black",padding:"5px"},onClick:function(){return e.setState({pageMargin:I})},children:"Small"}),Object(v.jsx)("div",{style:{flex:"1",height:"50px",display:"flex",flexDirection:"column",justifyContent:"center",textAlign:"center",background:this.state.pageMargin==P?"purple":"rgb(240,240,240)",color:this.state.pageMargin==P?"white":"black",padding:"5px"},onClick:function(){return e.setState({pageMargin:P})},children:"Big"})]})]}),s=Object(v.jsxs)("div",{style:{display:"flex",justifyContent:"space-between"},children:[Object(v.jsx)("div",{style:{display:"flex",flexDirection:"column",justifyContent:"center"},children:"Image quality"}),Object(v.jsxs)("div",{style:{display:"flex"},children:[Object(v.jsx)("div",{style:{padding:"5px"},children:Object(v.jsx)("button",{onClick:function(){e.state.imageQuality<10&&e.setState({imageQuality:+e.state.imageQuality+1})},children:"+"})}),Object(v.jsx)("div",{style:{padding:"5px"},children:Object(v.jsx)("div",{children:this.state.imageQuality/10})}),Object(v.jsx)("div",{style:{padding:"5px"},children:Object(v.jsx)("button",{onClick:function(){e.state.imageQuality>1&&e.setState({imageQuality:+e.state.imageQuality-1})},children:"-"})})]})]}),o={};this.state.forceShowOption&&(o.display="block");var l=this.state.forceShowOption?Object(v.jsx)("span",{onClick:function(){e.setState({forceShowOption:!1})},children:"X"}):Object(v.jsx)("span",{}),d=Object(v.jsxs)("div",{className:"options",style:o,children:[Object(v.jsxs)("div",{style:{paddingBottom:"10px",fontSize:"20px",display:"flex",justifyContent:"space-between"},children:[Object(v.jsx)("span",{children:"Options"}),l]}),Object(v.jsx)("div",{style:{paddingBottom:"10px",fontSize:"16px",color:"gray",paddingTop:"10px"},children:"Page orientation"}),Object(v.jsxs)("div",{style:{display:"flex"},children:[Object(v.jsx)("div",{style:{flex:"1",height:"50px",display:"flex",flexDirection:"column",justifyContent:"center",textAlign:"center",background:this.state.pageOrientation==S?"purple":"rgb(240,240,240)",color:this.state.pageOrientation==S?"white":"black",padding:"5px"},onClick:function(){return e.setState({pageOrientation:S})},children:"Portrait"}),Object(v.jsx)("div",{style:{flex:"1",height:"50px",display:"flex",flexDirection:"column",justifyContent:"center",textAlign:"center",background:this.state.pageOrientation==C?"purple":"rgb(240,240,240)",color:this.state.pageOrientation==C?"white":"black",padding:"5px"},onClick:function(){return e.setState({pageOrientation:C})},children:"Landscape"})]}),Object(v.jsx)("div",{style:{paddingBottom:"10px",fontSize:"16px",color:"gray",paddingTop:"20px"},children:"Page size"}),Object(v.jsxs)("div",{style:{display:"flex"},children:[Object(v.jsx)("div",{style:{flex:"1",height:"50px",display:"flex",flexDirection:"column",justifyContent:"center",textAlign:"center",background:this.state.pageSize==O?"purple":"rgb(240,240,240)",color:this.state.pageSize==O?"white":"black",padding:"5px"},onClick:function(){return e.setState({pageSize:O})},children:"A4"}),Object(v.jsx)("div",{style:{flex:"1",height:"50px",display:"flex",flexDirection:"column",justifyContent:"center",textAlign:"center",background:this.state.pageSize==k?"purple":"rgb(240,240,240)",color:this.state.pageSize==k?"white":"black",padding:"5px"},onClick:function(){return e.setState({pageSize:k})},children:"US Letter"}),Object(v.jsx)("div",{style:{flex:"1",height:"50px",display:"flex",flexDirection:"column",justifyContent:"center",textAlign:"center",background:this.state.pageSize==w?"purple":"rgb(240,240,240)",color:this.state.pageSize==w?"white":"black",padding:"5px"},onClick:function(){return e.setState({pageSize:w})},children:"Same as Image"})]}),this.state.pageSize!==w?r:Object(v.jsx)("div",{}),Object(v.jsx)("div",{style:{paddingBottom:"10px",fontSize:"16px",color:"gray",paddingTop:"20px"},children:"Compression"}),Object(v.jsxs)("div",{style:{display:"flex"},children:[Object(v.jsx)("div",{style:{flex:"1",height:"50px",display:"flex",flexDirection:"column",justifyContent:"center",textAlign:"center",background:this.state.compressImages?"purple":"rgb(240,240,240)",color:this.state.compressImages?"white":"black",padding:"5px"},onClick:function(){return e.setState({compressImages:!0})},children:"Compress Images"}),Object(v.jsx)("div",{style:{flex:"1",height:"50px",display:"flex",flexDirection:"column",justifyContent:"center",textAlign:"center",background:this.state.compressImages?"rgb(240,240,240)":"purple",color:this.state.compressImages?"black":"white",padding:"5px"},onClick:function(){return e.setState({compressImages:!1})},children:"Don't Compress"})]}),this.state.compressImages?s:Object(v.jsx)("div",{})]}),g=Object(v.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",padding:"10px",borderTop:"1px solid rgb(200,200,200)"},children:[Object(v.jsxs)("div",{style:{display:"flex"},children:[Object(v.jsx)("div",{style:{paddingLeft:"5px",paddingRight:"5px"},children:Object(v.jsx)("button",{onClick:function(){e.setState({forceShowOption:!0})},className:"option-btn button",children:"PDF Options"})}),Object(v.jsx)("button",{onClick:function(){return e.fileInput.current.click()},className:"button",children:"Add page"})]}),Object(v.jsx)("button",{onClick:this.createPdf,className:"button",children:"Generate PDF"})]}),u=Object(v.jsx)("div",{className:"page-header",children:Object(v.jsx)("span",{children:"CONVERT IMAGE TO PDF"})});if(this.state.images.length<1)return Object(v.jsxs)("div",{children:[u,Object(v.jsx)("input",{type:"file",ref:this.fileInput,onChange:function(){return e.readfiles(e.fileInput.current.files)},multiple:!0,style:{display:"none"}}),i]});var x={};return this.state.busy&&(x.display="flex"),Object(v.jsxs)("div",{style:{display:"flex",flexDirection:"column",width:"100%",height:"100%",overflow:"hidden",flex:"1"},children:[u,Object(v.jsxs)("div",{style:{display:"flex",overflow:"hidden",flex:"1"},children:[Object(v.jsxs)("div",{style:{display:"flex",flexDirection:"column",width:"100%",flex:"1",overflow:"auto",background:"rgb(240,240,240)"},onClick:this.clearSelection,children:[a,Object(v.jsx)("div",{style:{flex:"1"}})]}),d]}),g,Object(v.jsx)("input",{type:"file",accept:"image/*",ref:this.fileInput,onChange:function(){return e.readfiles(e.fileInput.current.files)},multiple:!0,style:{display:"none"}}),Object(v.jsx)("div",{className:"busy",style:x,children:"Generating PDF, Please wait..."})]})}},{key:"readExif",value:function(e){j.a.readFromBinaryFile(e)}},{key:"canvasToBlob",value:function(e,t){return new Promise((function(n,i){try{e.toBlob(n,"image/jpeg",t)}catch(a){i(a)}}))}},{key:"uuidv4",value:function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)}))}}]),n}(a.a.Component),M=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,71)).then((function(t){var n=t.getCLS,i=t.getFID,a=t.getFCP,r=t.getLCP,s=t.getTTFB;n(e),i(e),a(e),r(e),s(e)}))};n(69);s.a.render(Object(v.jsx)(a.a.StrictMode,{children:Object(v.jsx)(z,{})}),document.getElementById("root")),M()}},[[70,1,2]]]);
//# sourceMappingURL=main.cbe8b9bb.chunk.js.map